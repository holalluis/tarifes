//codi per poder importar arxius ( funció include() )
var fs = require("fs")
function read(f){return fs.readFileSync(f).toString();}
function include(f){eval.apply(global,[read(f)]);}

//inclou els arxius necessaris: classes.js, funcions.js, tarifa6.js
include('bin/classes.js'); include('bin/funcions.js'); include('bin/tarifa6.js')

/*
	PER CALCULAR UNA FACTURA CAL DEFINIR 12 INPUTS:
		01. tarifa		02. tipus		03. weekmod
		04. tint		05. festius		06. canvisHoraris
		07. periode		08. impostos	09. potContractades
		10. preus KWh	11. preus KW	12. vector de potència (KW)
*/
	// 1. tarifa (en aquest cas és la 6)
	tarifa = 6;

	// 2. tipus: variable global (funcions.js). És un array d'objectes de la classe Tipus (classes.js)
	tipus.push(new Tipus(6, 6, 6, 6, 6, 6, 6, 6, 2, 2, 1, 1, 1, 2, 2, 2, 2, 2, 1, 1, 1, 2, 2, 2 )) //tipus 0
	tipus.push(new Tipus(6, 6, 6, 6, 6, 6, 6, 6, 4, 4, 4, 4, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4 )) //tipus 1
	tipus.push(new Tipus(6, 6, 6, 6, 6, 6, 6, 6, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5 )) //tipus 2
	tipus.push(new Tipus(6, 6, 6, 6, 6, 6, 6, 6, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4 )) //tipus 3
	tipus.push(new Tipus(6, 6, 6, 6, 6, 6, 6, 6, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2 )) //tipus 4
	tipus.push(new Tipus(6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6 )) //tipus 5 (weekmod)

	// 3. weekmod: número enter. és el tipus que defineix els caps de setmana i festius (en aquest cas el tipus 5) 
	weekmod = 5

	// 4. tint: 60 minuts (en hores). Això vol dir que tenim una dada de potència (kW) cada hora
	tint = 0.25

	// 5. festius: variable global (funcions.js). És un array d'objectes de la classe DiaFestiu (classes.js)
	festius.push(new DiaFestiu(new Date(Date.UTC(2012,abr,06)), "Divendres Sant"				));
	festius.push(new DiaFestiu(new Date(Date.UTC(2012,mai,01)), "Dia del Treball"				));
	festius.push(new DiaFestiu(new Date(Date.UTC(2012,ago,15)), "Assumpció de la Verge"			));
	festius.push(new DiaFestiu(new Date(Date.UTC(2012,oct,12)), "El Pilar"						));
	festius.push(new DiaFestiu(new Date(Date.UTC(2012,nov,01)), "Tots Sants"					));
	festius.push(new DiaFestiu(new Date(Date.UTC(2012,des,06)), "Dia de la Constitució"			));
	festius.push(new DiaFestiu(new Date(Date.UTC(2012,des,08)), "Immaculada Concepció"			));
	festius.push(new DiaFestiu(new Date(Date.UTC(2012,des,25)), "Nadal"							));

	// 6. canvisHoraris: interval on s'aplica GMT+1. variable global. És array d'objectes de la classe CanviHorari
	canvisHoraris.push(new CanviHorari(new Date(Date.UTC(2012,mar,25,02,00)), new Date(Date.UTC(2012,oct,28,02,00) )))

	// 7. periodes: periode estudiat. variable global. Array d'objectes de la classe Periode
	// Un període es defineix pel seu tipus, data inicial i data final de la forma "new Periode(tipus,data inicial,data final)"
	periodes.push(new Periode(2, 	new Date(Date.UTC(2012,mai,01)), 	new Date(Date.UTC(2012,jun,01)) ))

	// 8. impostos. Variables globals. Són directament números
	tax_alq = 59.02		//lloguer
	tax_im1 = 0.04864	//impostos 1
	tax_im2 = 1.05113	//impostos 2
	tax_iva = 0.18		//iva

	// 9. potències contractades (kW). Variables globals. Són directament números
	potConP1 = 350
	potConP2 = 380
	potConP3 = 400
	potConP4 = 400
	potConP5 = 400
	potConP6 = 451

	// 10. preus per kWh per cada període (p1,p2,...,p6). Variables globals. Són directament números
	eurKWhP1 = 0.164136
	eurKWhP2 = 0.131849
	eurKWhP3 = 0.10958
	eurKWhP4 = 0.085797
	eurKWhP5 = 0.080138
	eurKWhP6 = 0.066081

	// 11. preus per kW per cada període (p1,p2,...,p6). Variables globals. Són directament números
	eurKWP1 = 17.683102
	eurKWP2 = 8.849205
	eurKWP3 = 6.476148
	eurKWP4 = 6.476148
	eurKWP5 = 6.476148
	eurKWP6 = 2.954837

	// 12. vectorPotencia: energy (kW). Variable global. array de números.
	energy=[
		84,
		80,
		88,
		80,
		84,
		76,
		76,
		88,
		92,
		96,
		100,
		104,
		100,
		100,
		104,
		100,
		88,
		80,
		80,
		84,
		84,
		88,
		92,
		88,
		96,
		76,
		84,
		80,
		84,
		84,
		80,
		80,
		56,
		60,
		64,
		72,
		68,
		68,
		64,
		96,
		80,
		96,
		108,
		112,
		116,
		112,
		124,
		128,
		176,
		200,
		204,
		196,
		192,
		188,
		196,
		200,
		204,
		204,
		204,
		212,
		212,
		204,
		208,
		216,
		208,
		204,
		180,
		136,
		140,
		148,
		148,
		152,
		124,
		124,
		124,
		128,
		128,
		124,
		132,
		128,
		136,
		136,
		140,
		148,
		148,
		144,
		144,
		148,
		148,
		168,
		168,
		172,
		164,
		168,
		164,
		164,
		176,
		188,
		228,
		224,
		216,
		204,
		216,
		212,
		212,
		212,
		196,
		208,
		196,
		196,
		192,
		176,
		160,
		160,
		156,
		156,
		104,
		84,
		88,
		88,
		84,
		124,
		128,
		128,
		124,
		120,
		128,
		124,
		132,
		132,
		144,
		152,
		128,
		128,
		124,
		140,
		140,
		160,
		180,
		168,
		148,
		104,
		68,
		120,
		132,
		136,
		136,
		108,
		128,
		116,
		104,
		104,
		120,
		112,
		100,
		108,
		140,
		164,
		148,
		144,
		164,
		196,
		156,
		136,
		156,
		160,
		164,
		144,
		156,
		160,
		152,
		168,
		152,
		156,
		164,
		172,
		176,
		172,
		188,
		192,
		188,
		192,
		200,
		208,
		208,
		212,
		208,
		176,
		160,
		156,
		144,
		144,
		128,
		128,
		124,
		124,
		96,
		96,
		96,
		92,
		88,
		88,
		84,
		84,
		76,
		76,
		72,
		72,
		68,
		68,
		68,
		68,
		104,
		104,
		104,
		100,
		172,
		172,
		168,
		168,
		172,
		172,
		172,
		172,
		196,
		196,
		196,
		192,
		184,
		180,
		180,
		180,
		208,
		208,
		208,
		204,
		176,
		172,
		172,
		172,
		148,
		144,
		144,
		144,
		96,
		96,
		96,
		96,
		104,
		104,
		100,
		100,
		108,
		108,
		104,
		104,
		108,
		108,
		104,
		104,
		124,
		120,
		120,
		120,
		152,
		152,
		148,
		148,
		160,
		160,
		156,
		156,
		176,
		176,
		176,
		176,
		196,
		196,
		196,
		196,
		204,
		204,
		204,
		200,
		200,
		196,
		196,
		196,
		188,
		176,
		144,
		128,
		124,
		132,
		108,
		92,
		100,
		88,
		100,
		92,
		92,
		104,
		84,
		100,
		92,
		92,
		80,
		64,
		44,
		80,
		64,
		84,
		88,
		96,
		68,
		40,
		80,
		92,
		112,
		132,
		140,
		148,
		168,
		152,
		176,
		192,
		192,
		184,
		236,
		252,
		244,
		248,
		232,
		228,
		232,
		232,
		228,
		220,
		196,
		228,
		228,
		184,
		176,
		168,
		168,
		168,
		136,
		92,
		96,
		88,
		96,
		88,
		88,
		88,
		88,
		92,
		84,
		88,
		96,
		88,
		84,
		88,
		84,
		92,
		84,
		88,
		88,
		88,
		84,
		92,
		92,
		100,
		124,
		168,
		184,
		196,
		192,
		204,
		216,
		224,
		228,
		224,
		212,
		212,
		200,
		204,
		196,
		200,
		196,
		192,
		192,
		192,
		172,
		176,
		172,
		172,
		124,
		88,
		84,
		76,
		80,
		52,
		68,
		76,
		52,
		68,
		72,
		72,
		68,
		72,
		44,
		28,
		20,
		40,
		20,
		44,
		52,
		40,
		52,
		44,
		56,
		64,
		72,
		84,
		76,
		88,
		92,
		96,
		116,
		120,
		156,
		204,
		224,
		224,
		224,
		224,
		236,
		232,
		232,
		236,
		244,
		244,
		248,
		252,
		244,
		232,
		240,
		244,
		244,
		232,
		220,
		212,
		212,
		216,
		212,
		164,
		160,
		156,
		152,
		156,
		152,
		156,
		156,
		156,
		152,
		152,
		152,
		168,
		164,
		168,
		172,
		176,
		176,
		172,
		176,
		176,
		172,
		172,
		188,
		228,
		220,
		220,
		216,
		216,
		220,
		220,
		220,
		216,
		220,
		216,
		216,
		216,
		204,
		204,
		204,
		200,
		204,
		200,
		200,
		200,
		200,
		200,
		196,
		196,
		124,
		120,
		120,
		120,
		112,
		112,
		108,
		108,
		92,
		92,
		92,
		88,
		108,
		108,
		108,
		104,
		120,
		120,
		120,
		120,
		136,
		132,
		132,
		132,
		140,
		140,
		140,
		140,
		140,
		140,
		136,
		136,
		204,
		204,
		204,
		200,
		240,
		236,
		236,
		236,
		236,
		236,
		236,
		236,
		236,
		236,
		236,
		232,
		232,
		228,
		228,
		228,
		224,
		224,
		224,
		224,
		220,
		220,
		216,
		216,
		236,
		236,
		236,
		232,
		184,
		184,
		184,
		184,
		172,
		172,
		172,
		168,
		152,
		152,
		152,
		144,
		136,
		140,
		132,
		140,
		128,
		136,
		116,
		136,
		140,
		132,
		136,
		132,
		136,
		140,
		172,
		208,
		212,
		196,
		200,
		196,
		172,
		208,
		208,
		196,
		180,
		200,
		192,
		212,
		196,
		192,
		184,
		184,
		144,
		160,
		152,
		132,
		144,
		144,
		148,
		120,
		88,
		84,
		92,
		144,
		132,
		136,
		144,
		120,
		112,
		108,
		100,
		100,
		84,
		92,
		80,
		92,
		80,
		88,
		96,
		104,
		108,
		104,
		124,
		176,
		196,
		196,
		172,
		172,
		184,
		180,
		164,
		184,
		176,
		148,
		140,
		144,
		144,
		144,
		160,
		160,
		156,
		160,
		164,
		176,
		176,
		172,
		172,
		172,
		176,
		176,
		176,
		172,
		172,
		176,
		168,
		116,
		128,
		124,
		148,
		180,
		184,
		192,
		180,
		196,
		184,
		192,
		172,
		188,
		184,
		180,
		168,
		184,
		148,
		176,
		192,
		180,
		164,
		124,
		148,
		116,
		124,
		104,
		124,
		84,
		80,
		64,
		72,
		72,
		88,
		88,
		88,
		92,
		76,
		92,
		88,
		132,
		140,
		132,
		104,
		136,
		100,
		96,
		136,
		132,
		76,
		60,
		76,
		60,
		84,
		144,
		144,
		108,
		136,
		144,
		88,
		104,
		148,
		104,
		84,
		148,
		100,
		88,
		140,
		104,
		88,
		132,
		104,
		88,
		140,
		112,
		96,
		140,
		144,
		148,
		188,
		180,
		180,
		200,
		216,
		220,
		216,
		228,
		196,
		208,
		220,
		212,
		200,
		188,
		204,
		204,
		204,
		204,
		168,
		164,
		164,
		164,
		156,
		156,
		156,
		152,
		156,
		152,
		152,
		152,
		140,
		140,
		136,
		136,
		148,
		144,
		144,
		144,
		156,
		156,
		152,
		152,
		156,
		156,
		152,
		152,
		156,
		156,
		156,
		152,
		172,
		168,
		168,
		168,
		168,
		164,
		164,
		164,
		188,
		188,
		188,
		184,
		216,
		212,
		212,
		212,
		160,
		160,
		156,
		156,
		148,
		148,
		148,
		144,
		156,
		152,
		152,
		152,
		144,
		144,
		144,
		144,
		144,
		144,
		144,
		140,
		132,
		132,
		132,
		132,
		124,
		124,
		124,
		124,
		148,
		148,
		148,
		144,
		180,
		180,
		180,
		180,
		184,
		184,
		180,
		180,
		168,
		164,
		164,
		164,
		168,
		140,
		164,
		164,
		132,
		136,
		124,
		140,
		112,
		132,
		108,
		132,
		104,
		120,
		84,
		120,
		52,
		52,
		44,
		56,
		56,
		48,
		60,
		24,
		68,
		76,
		92,
		100,
		100,
		84,
		100,
		104,
		108,
		180,
		164,
		160,
		108,
		128,
		116,
		132,
		132,
		152,
		148,
		156,
		188,
		200,
		196,
		220,
		220,
		236,
		224,
		244,
		220,
		200,
		204,
		184,
		176,
		168,
		184,
		184,
		216,
		248,
		248,
		236,
		224,
		192,
		172,
		176,
		176,
		172,
		188,
		188,
		184,
		196,
		188,
		192,
		192,
		196,
		192,
		200,
		192,
		184,
		204,
		188,
		212,
		200,
		212,
		220,
		212,
		240,
		224,
		236,
		232,
		236,
		236,
		240,
		228,
		220,
		212,
		212,
		180,
		172,
		168,
		172,
		180,
		160,
		148,
		148,
		136,
		136,
		136,
		136,
		136,
		128,
		132,
		148,
		152,
		152,
		152,
		160,
		148,
		140,
		128,
		80,
		80,
		116,
		112,
		120,
		116,
		112,
		116,
		108,
		88,
		80,
		96,
		104,
		124,
		176,
		168,
		184,
		168,
		172,
		208,
		228,
		220,
		200,
		172,
		168,
		176,
		172,
		168,
		180,
		164,
		148,
		152,
		152,
		160,
		148,
		164,
		160,
		164,
		160,
		160,
		168,
		160,
		164,
		156,
		168,
		156,
		160,
		156,
		164,
		160,
		160,
		156,
		160,
		160,
		176,
		192,
		196,
		200,
		204,
		212,
		216,
		220,
		216,
		212,
		224,
		224,
		212,
		208,
		216,
		156,
		148,
		152,
		148,
		124,
		128,
		120,
		136,
		108,
		104,
		100,
		92,
		92,
		84,
		84,
		80,
		80,
		76,
		104,
		148,
		164,
		136,
		136,
		148,
		144,
		144,
		132,
		128,
		124,
		132,
		140,
		148,
		160,
		160,
		156,
		168,
		172,
		168,
		172,
		168,
		184,
		172,
		176,
		184,
		200,
		208,
		200,
		136,
		124,
		124,
		128,
		128,
		132,
		116,
		124,
		132,
		124,
		128,
		128,
		136,
		128,
		128,
		136,
		132,
		144,
		136,
		148,
		144,
		140,
		128,
		152,
		196,
		204,
		212,
		180,
		192,
		188,
		208,
		212,
		244,
		240,
		240,
		240,
		240,
		244,
		236,
		248,
		264,
		256,
		232,
		256,
		248,
		220,
		212,
		204,
		208,
		192,
		196,
		196,
		196,
		180,
		184,
		180,
		184,
		172,
		172,
		112,
		120,
		104,
		108,
		108,
		156,
		152,
		148,
		148,
		148,
		144,
		152,
		168,
		172,
		176,
		168,
		172,
		164,
		172,
		164,
		156,
		168,
		156,
		144,
		152,
		164,
		176,
		184,
		184,
		180,
		168,
		140,
		108,
		116,
		128,
		128,
		136,
		132,
		140,
		140,
		136,
		132,
		124,
		124,
		132,
		136,
		124,
		128,
		116,
		132,
		120,
		124,
		116,
		128,
		128,
		144,
		152,
		148,
		156,
		144,
		144,
		144,
		148,
		132,
		144,
		148,
		168,
		196,
		200,
		212,
		200,
		196,
		184,
		192,
		188,
		188,
		192,
		200,
		196,
		220,
		212,
		216,
		212,
		196,
		212,
		196,
		212,
		204,
		208,
		212,
		204,
		180,
		120,
		120,
		116,
		108,
		104,
		104,
		88,
		88,
		84,
		92,
		92,
		80,
		84,
		84,
		76,
		92,
		92,
		104,
		108,
		136,
		128,
		128,
		132,
		120,
		124,
		136,
		108,
		116,
		148,
		160,
		140,
		156,
		168,
		188,
		244,
		228,
		252,
		256,
		248,
		228,
		232,
		236,
		240,
		240,
		216,
		180,
		172,
		128,
		112,
		124,
		116,
		120,
		120,
		128,
		136,
		140,
		140,
		144,
		136,
		140,
		140,
		148,
		144,
		140,
		148,
		144,
		144,
		140,
		152,
		160,
		196,
		228,
		248,
		240,
		224,
		228,
		232,
		240,
		228,
		248,
		228,
		240,
		228,
		224,
		216,
		224,
		208,
		204,
		200,
		196,
		192,
		196,
		208,
		200,
		212,
		200,
		160,
		172,
		176,
		172,
		164,
		176,
		156,
		152,
		148,
		148,
		140,
		132,
		132,
		136,
		120,
		116,
		116,
		116,
		120,
		136,
		132,
		136,
		180,
		172,
		180,
		140,
		136,
		132,
		132,
		124,
		132,
		156,
		176,
		184,
		188,
		196,
		208,
		280,
		276,
		256,
		204,
		200,
		196,
		224,
		224,
		224,
		220,
		196,
		124,
		112,
		120,
		116,
		108,
		116,
		112,
		112,
		144,
		164,
		156,
		152,
		116,
		108,
		100,
		96,
		92,
		96,
		92,
		88,
		88,
		108,
		96,
		100,
		104,
		120,
		132,
		132,
		144,
		148,
		156,
		136,
		132,
		152,
		132,
		132,
		124,
		132,
		148,
		180,
		180,
		188,
		164,
		144,
		144,
		144,
		140,
		140,
		136,
		140,
		128,
		132,
		132,
		132,
		128,
		128,
		128,
		136,
		72,
		68,
		68,
		68,
		64,
		68,
		60,
		72,
		56,
		60,
		104,
		76,
		96,
		104,
		60,
		60,
		52,
		76,
		108,
		96,
		92,
		92,
		104,
		112,
		168,
		276,
		260,
		268,
		176,
		112,
		116,
		148,
		156,
		152,
		156,
		160,
		144,
		112,
		76,
		100,
		88,
		88,
		96,
		92,
		100,
		96,
		88,
		108,
		92,
		100,
		96,
		96,
		104,
		92,
		92,
		124,
		152,
		152,
		144,
		148,
		152,
		156,
		152,
		156,
		144,
		140,
		156,
		168,
		184,
		188,
		192,
		196,
		196,
		196,
		192,
		212,
		192,
		188,
		180,
		168,
		112,
		96,
		96,
		104,
		144,
		144,
		144,
		144,
		140,
		140,
		140,
		144,
		136,
		132,
		136,
		124,
		124,
		132,
		120,
		128,
		120,
		112,
		128,
		128,
		120,
		112,
		108,
		92,
		96,
		76,
		68,
		84,
		88,
		80,
		84,
		92,
		96,
		100,
		104,
		96,
		96,
		84,
		92,
		108,
		112,
		104,
		128,
		156,
		152,
		152,
		156,
		156,
		148,
		140,
		104,
		100,
		92,
		100,
		92,
		96,
		92,
		140,
		188,
		204,
		196,
		196,
		152,
		156,
		156,
		156,
		156,
		168,
		148,
		144,
		144,
		144,
		160,
		168,
		172,
		176,
		184,
		180,
		196,
		196,
		208,
		220,
		216,
		228,
		212,
		200,
		212,
		168,
		160,
		148,
		132,
		136,
		120,
		112,
		104,
		104,
		100,
		84,
		92,
		100,
		72,
		76,
		60,
		64,
		60,
		52,
		48,
		60,
		60,
		44,
		56,
		56,
		68,
		44,
		68,
		84,
		112,
		136,
		140,
		144,
		144,
		164,
		188,
		196,
		172,
		128,
		152,
		128,
		108,
		96,
		96,
		112,
		128,
		152,
		140,
		148,
		156,
		144,
		152,
		260,
		260,
		272,
		272,
		268,
		232,
		216,
		108,
		104,
		108,
		96,
		100,
		108,
		104,
		96,
		104,
		100,
		100,
		96,
		104,
		108,
		116,
		116,
		116,
		128,
		112,
		116,
		120,
		116,
		128,
		148,
		176,
		172,
		168,
		164,
		176,
		180,
		168,
		168,
		168,
		168,
		164,
		176,
		176,
		188,
		192,
		192,
		196,
		188,
		176,
		176,
		180,
		184,
		180,
		136,
		108,
		128,
		112,
		108,
		128,
		116,
		120,
		112,
		116,
		128,
		132,
		132,
		128,
		136,
		124,
		124,
		124,
		108,
		128,
		120,
		116,
		108,
		100,
		88,
		108,
		116,
		128,
		152,
		160,
		156,
		156,
		152,
		156,
		156,
		164,
		164,
		176,
		172,
		168,
		180,
		172,
		168,
		172,
		160,
		168,
		132,
		104,
		104,
		112,
		116,
		112,
		100,
		112,
		128,
		132,
		124,
		132,
		144,
		140,
		140,
		148,
		148,
		148,
		140,
		144,
		152,
		160,
		152,
		124,
		132,
		124,
		120,
		116,
		120,
		120,
		124,
		116,
		120,
		124,
		128,
		160,
		200,
		200,
		192,
		184,
		192,
		184,
		188,
		176,
		196,
		188,
		180,
		188,
		180,
		180,
		172,
		172,
		176,
		188,
		188,
		188,
		180,
		136,
		132,
		124,
		132,
		128,
		128,
		128,
		124,
		120,
		96,
		128,
		144,
		132,
		136,
		156,
		164,
		156,
		140,
		144,
		152,
		152,
		136,
		140,
		128,
		120,
		124,
		112,
		112,
		116,
		108,
		120,
		128,
		116,
		120,
		120,
		124,
		132,
		120,
		124,
		112,
		120,
		112,
		116,
		108,
		144,
		192,
		212,
		216,
		180,
		200,
		196,
		188,
		196,
		196,
		196,
		196,
		188,
		192,
		184,
		188,
		200,
		180,
		172,
		172,
		176,
		176,
		180,
		140,
		128,
		132,
		132,
		132,
		132,
		136,
		132,
		140,
		128,
		136,
		132,
		128,
		140,
		124,
		120,
		112,
		120,
		112,
		108,
		108,
		104,
		104,
		104,
		100,
		96,
		112,
		124,
		120,
		112,
		120,
		116,
		112,
		112,
		112,
		112,
		112,
		144,
		148,
		168,
		164,
		176,
		196,
		212,
		180,
		172,
		184,
		184,
		192,
		180,
		204,
		204,
		164,
		104,
		96,
		96,
		124,
		152,
		128,
		124,
		136,
		104,
		132,
		136,
		144,
		144,
		132,
		112,
		100,
		104,
		104,
		108,
		124,
		116,
		140,
		180,
		180,
		184,
		192,
		188,
		200,
		188,
		184,
		172,
		108,
		116,
		104,
		116,
		112,
		128,
		112,
		104,
		124,
		112,
		116,
		124,
		124,
		128,
		120,
		128,
		136,
		136,
		132,
		132,
		132,
		124,
		128,
		128,
		120,
		120,
		116,
		136,
		132,
		140,
		136,
		136,
		136,
		128,
		128,
		128,
		124,
		112,
		112,
		112,
		108,
		84,
		84,
		84,
		80,
		76,
		76,
		76,
		72,
		76,
		76,
		72,
		72,
		96,
		92,
		92,
		92,
		120,
		116,
		116,
		116,
		116,
		116,
		112,
		112,
		92,
		92,
		92,
		92,
		140,
		140,
		140,
		136,
		148,
		148,
		148,
		148,
		112,
		108,
		108,
		108,
		112,
		112,
		112,
		108,
		84,
		84,
		84,
		80,
		76,
		76,
		76,
		76,
		76,
		76,
		72,
		72,
		76,
		76,
		76,
		76,
		80,
		80,
		76,
		76,
		76,
		76,
		72,
		72,
		96,
		92,
		92,
		92,
		104,
		104,
		104,
		104,
		108,
		108,
		108,
		104,
		132,
		132,
		128,
		128,
		180,
		180,
		176,
		172,
		168,
		156,
		164,
		164,
		156,
		140,
		136,
		144,
		144,
		120,
		124,
		128,
		132,
		124,
		120,
		88,
		60,
		60,
		56,
		56,
		60,
		92,
		96,
		88,
		88,
		68,
		48,
		48,
		52,
		36,
		40,
		44,
		52,
		64,
		72,
		84,
		104,
		108,
		116,
		120,
		148,
		164,
		164,
		160,
		160,
		208,
		204,
		172,
		160,
		216,
		212,
		128,
		124,
		96,
		100,
		100,
		96,
		96,
		92,
		100,
		92,
		92,
		100,
		104,
		108,
		100,
		104,
		108,
		104,
		100,
		92,
		104,
		100,
		92,
		88,
		96,
		88,
		92,
		92,
		100,
		120,
		152,
		200,
		216,
		196,
		200,
		208,
		208,
		200,
		204,
		200,
		204,
		192,
		192,
		188,
		188,
		168,
		164,
		164,
		164,
		152,
		152,
		152,
		148,
		84,
		84,
		84,
		80,
		72,
		72,
		68,
		68,
		76,
		72,
		72,
		72,
		88,
		84,
		84,
		84,
		112,
		112,
		108,
		108,
		116,
		116,
		116,
		116,
		100,
		100,
		96,
		96,
		140,
		140,
		136,
		136,
		184,
		184,
		184,
		184,
		152,
		152,
		148,
		148,
		132,
		132,
		132,
		132,
		128,
		128,
		128,
		124,
		136,
		136,
		136,
		132,
		140,
		140,
		136,
		136,
		128,
		128,
		128,
		128,
		88,
		88,
		88,
		88,
		100,
		100,
		100,
		100,
		96,
		96,
		96,
		96,
		132,
		132,
		132,
		132,
		220,
		220,
		220,
		216,
		180,
		180,
		176,
		176,
		184,
		172,
		168,
		160,
		152,
		144,
		140,
		148,
		132,
		136,
		132,
		136,
		132,
		124,
		128,
		128,
		124,
		116,
		132,
		124,
		120,
		120,
		116,
		72,
		64,
		56,
		60,
		56,
		64,
		104,
		104,
		96,
		92,
		88,
		96,
		108,
		120,
		136,
		136,
		172,
		188,
		196,
		192,
		196,
		192,
		168,
		184,
		188,
		164,
		176,
		200,
		224,
		204,
		192,
		188,
		184,
		188,
		184,
		180,
		184,
		184,
		188,
		184,
		184,
		188,
		180,
		184,
		188,
		180,
		184,
		192,
		196,
		188,
		188,
		192,
		196,
		188,
		192,
		188,
		200,
		220,
		196,
		180,
		180,
		172,
		176,
		172,
		180,
		180,
		180,
		172,
		192,
		188,
		156,
		160,
		152,
		164,
		148,
		152,
		168,
		136,
		136,
		188,
		196,
		184,
		184,
		192,
		188,
		188,
		196,
		188,
		200,
		192,
		184,
		192,
		184,
		184,
		176,
		180,
		180,
		188,
		180,
		156,
		132,
		108,
		112,
		124,
		120,
		116,
		124,
		120,
		128,
		128,
		128,
		144,
		140,
		144,
		144,
		148,
		160,
		172,
		172,
		156,
		156,
		144,
		144,
		144,
		140,
		140,
		136,
		136,
		152,
		148,
		148,
		152,
		204,
		216,
		212,
		216,
		220,
		212,
		216,
		212,
		224,
		212,
		216,
		228,
		224,
		212,
		208,
		212,
		216,
		208,
		208,
		212,
		212,
		208,
		224,
		224,
		232,
		204,
		220,
		236,
		240,
		200,
		196,
		176,
		188,
		148,
		144,
		144,
		136,
		140,
		124,
		124,
		112,
		116,
		112,
		108,
		108,
		84,
		80,
		76,
		76,
		80,
		76,
		116,
		124,
		108,
		116,
		112,
		124,
		156,
		164,
		168,
		172,
		172,
		164,
		160,
		168,
		160,
		172,
		188,
		196,
		192,
		192,
		192,
		208,
		204,
		204,
		160,
		160,
		164,
		144,
		176,
		160,
		160,
		152,
		156,
		156,
		156,
		156,
		156,
		156,
		156,
		144,
		156,
		164,
		148,
		152,
		148,
		156,
		160,
		148,
		152,
		164,
		164,
		156,
		160,
		156,
		160,
		148,
		152,
		160,
		152,
		176,
		208,
		220,
		208,
		220,
		224,
		232,
		228,
		232,
		232,
		232,
		240,
		252,
		252,
		256,
		236,
		228,
		240,
		248,
		240,
		232,
		228,
		224,
		220,
		220,
		220,
		216,
		176,
		172,
		172,
		172,
		144,
		140,
		140,
		140,
		128,
		128,
		124,
		124,
		116,
		116,
		116,
		112,
		116,
		116,
		112,
		112,
		132,
		132,
		128,
		128,
		152,
		148,
		148,
		148,
		144,
		144,
		144,
		140,
		108,
		104,
		104,
		104,
		220,
		220,
		220,
		220,
		224,
		224,
		224,
		220,
		228,
		228,
		228,
		228,
		168,
		168,
		164,
		164,
		124,
		124,
		124,
		124,
		132,
		132,
		132,
		128,
		176,
		172,
		172,
		172,
		192,
		192,
		192,
		192,
		192,
		192,
		188,
		188,
		116,
		116,
		112,
		112,
		120,
		120,
		120,
		116,
		120,
		116,
		116,
		116,
		116,
		116,
		116,
		116,
		116,
		116,
		116,
		112,
		76,
		72,
		76,
		76,
		52,
		52,
		80,
		152,
		152,
		168,
		160,
		156,
		160,
		152,
		156,
		164,
		168,
		168,
		176,
		188,
		188,
		188,
		196,
		196,
		204,
		244,
		248,
		268,
		260,
		264,
		260,
		268,
		248,
		204,
		204,
		176,
		176,
		168,
		172,
		176,
		200,
		208,
		212,
		192,
		144,
		148,
		144,
		160,
		188,
		184,
		188,
		192,
		180,
		152,
		140,
		140,
		136,
		160,
		200,
		216,
		184,
		188,
		196,
		204,
		200,
		200,
		192,
		192,
		204,
		196,
		196,
		208,
		200,
		204,
		220,
		212,
		216,
		212,
		212,
		168,
		176,
		172,
		176,
		188,
		184,
		192,
		204,
		200,
		196,
		160,
		160,
		156,
		152,
		156,
		140,
		156,
		140,
		136,
		136,
		136,
		124,
		124,
		124,
		124,
		108,
		108,
		108,
		108,
		112,
		112,
		112,
		108,
		152,
		148,
		148,
		148,
		156,
		152,
		152,
		152,
		176,
		176,
		172,
		172,
		192,
		192,
		188,
		188,
		108,
		108,
		108,
		104,
		112,
		108,
		108,
		108,
		136,
		136,
		132,
		132,
		160,
		160,
		160,
		156,
		168,
		168,
		164,
		164,
		112,
		112,
		112,
		112,
		108,
		104,
		104,
		104,
		112,
		112,
		108,
		108,
		116,
		112,
		112,
		112,
		124,
		124,
		120,
		120,
		140,
		136,
		136,
		136,
		132,
		132,
		128,
		128,
		140,
		140,
		140,
		136,
		140,
		140,
		140,
		136,
		156,
		156,
		152,
		152,
		184,
		180,
		180,
		180,
		164,
		164,
		176,
		172,
		168,
		168,
		164,
		172,
		164,
		160,
		164,
		160,
		152,
		144,
		92,
		80,
		88,
		76,
		68,
		76,
		72,
		96,
		108,
		96,
		104,
		128,
		136,
		132,
		144,
		144,
		132,
		148,
		124,
		128,
		132,
		108,
		92,
		84,
		88,
		160,
		172,
		168,
		164,
		172,
		188,
		184,
		192,
		148,
		152,
		124,
		160,
		200,
		184,
		180,
		184,
		188,
		176,
		180,
		180,
		180,
		180,
		180,
		180,
		184,
		180,
		180,
		184,
		184,
		180,
		184,
		184,
		180,
		176,
		172,
		172,
		156,
		128,
		148,
		152,
		152,
		144,
		152,
		152,
		160,
		160,
		172,
		180,
		180,
		188,
		176,
		176,
		184,
		168,
		148,
		140,
		148
	];
// FI INPUTS

/*
	Un cop tenim els 12 inputs definits, ja podem cridar la funcio calcula():
	La funcio "calcula()" retorna el total+iva, el guardem a una nova variable que anomenem "cost"
*/

//mostra un títol a la pantalla
console.log("+------------------------------------------------------+")
console.log("|   Factura real                                       |")
console.log("+------------------------------------------------------+")
potConP1=350; potConP2=380; potConP3=400; potConP4=400; potConP5=400; potConP6=451;
var cost = calcula()[0]

/** OPTIMITZACIO */

//nou objecte optimització anomenat "op"
var op = {
	costOptim:Infinity,
	potConP1:0,
	potConP2:0,
	potConP3:0,
	potConP4:0,
	potConP5:0,
	potConP6:0,
}

//mostra un títol a la pantalla
console.log("+------------------------------------------------------+")
console.log("|   Optimització: Variació de Potències Contractades   |")
console.log("+------------------------------------------------------+")

//definim potència inicial, final i step
var pot_ini = 260;
var pot_fin = 320;
var pot_stp = 20;

console.log("P1  P2  P3  P4  P5  P6  total+iva")
//comença els 6 bucles de combinacions de potències contractades (lent)
for(var p1=pot_ini; p1<=pot_fin; p1+=pot_stp)
	for(var p2=pot_ini; p2<=pot_fin; p2+=pot_stp)
		for(var p3=pot_ini; p3<=pot_fin; p3+=pot_stp)
			for(var p4=pot_ini; p4<=pot_fin; p4+=pot_stp)
				for(var p5=pot_ini; p5<=pot_fin; p5+=pot_stp)
					for(var p6=pot_ini; p6<=pot_fin; p6+=pot_stp)
					{
						//només prova la combinació de potències si p1<=p2<=p3<=p4<=p5<=p6
						if(p1<=p2 && p2<=p3 && p3<=p4 && p4<=p5 && p5<=p6)
						{
							potConP1=p1; potConP2=p2; potConP3=p3; potConP4=p4; potConP5=p5; potConP6=p6;
							var cost=calcula()[0]
							console.log(p1,p2,p3,p4,p5,p6,cost)

							//si el nou cost és més petit, guarda'l dins de "op" juntament amb les potències provades
							if(cost < op.costOptim) 
							{
								op.costOptim=cost
								op.potConP1=p1; op.potConP2=p2; op.potConP3=p3; op.potConP4=p4; op.potConP5=p5; op.potConP6=p6;
							}
						}
					}

//optimització feta, ara mostrem els valors optims a la pantalla
console.log(">>> OPTIMITZACIÓ FINALITZADA") 
console.log(">>> Potències Contractades Òptimes:\t"+op.potConP1+"\t"+op.potConP2+"\t"+op.potConP3+"\t"+op.potConP4+"\t"+op.potConP5+"\t"+op.potConP6+" kW")
console.log(">>> Cost Total+IVA Òptim:\t\t"+op.costOptim+" euros")
